<mvc:View
    controllerName="bstu.hmss.manageinvoices.list.InvoiceList"
    xmlns="sap.m"
    xmlns:f="sap.f"
    xmlns:mvc="sap.ui.core.mvc"
    xmlns:core="sap.ui.core"
    xmlns:smartVariantManagement="sap.ui.comp.smartvariants"
    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"
    xmlns:smartTable="sap.ui.comp.smarttable"
    xmlns:table="sap.ui.table">
    <f:DynamicPage
        id="page"
        preserveHeaderStateOnScroll="false"
        showFooter="{= ${message>/}.length > 0 }"
        fitContent="true">
        <f:title>
            <f:DynamicPageTitle id="DynamicPageTitle">
                <f:heading>
                    <smartVariantManagement:SmartVariantManagement
                        id="idInvoiceListPageVariant"
                        persistencyKey="bstu.hmss.manageinvoices.InvoiceList"
                        showExecuteOnSelection="true"/>
                </f:heading>
                <f:snappedContent>
                    <Text
                        id="idFilterText"
                        wrapping="false"/>
                </f:snappedContent>
            </f:DynamicPageTitle>
        </f:title>
        <f:header>
            <f:DynamicPageHeader id="DynamicPageHeader" pinnable="false">
                <f:content>
                    <smartFilterBar:SmartFilterBar
                        id="idInvoiceListFilterBar"
                        entitySet="Invoices"
                        useToolbar="false"
                        enableBasicSearch="true"
                        showClearOnFB="true"
                        showClearButton="true"
                        search="onSearch"
                        clear="onClearInvoiceListFilters"
                        class="sapUiNoContentPadding">
                        <smartFilterBar:controlConfiguration>
                            <smartFilterBar:ControlConfiguration
                                id="idInvoiceDateFilterConfiguration"
                                index="1"
                                key="InvoiceDate"
                                groupId="_BASIC"
                                visibleInAdvancedArea="true"/>
                            <smartFilterBar:ControlConfiguration
                                id="idInvoiceNumberFilterConfiguration"
                                index="2"
                                key="InvoiceNumber"
                                groupId="_BASIC"
                                visibleInAdvancedArea="true"/>
                            <smartFilterBar:ControlConfiguration
                                id="idStatusFilterConfiguration"
                                index="3"
                                key="Status"
                                groupId="_BASIC"
                                visibleInAdvancedArea="true"/>
                            <smartFilterBar:ControlConfiguration
                                id="idRoomNumberFilterConfiguration"
                                index="4"
                                key="RoomNumber"
                                groupId="_BASIC"
                                visibleInAdvancedArea="true"/>
                        </smartFilterBar:controlConfiguration>
                    </smartFilterBar:SmartFilterBar>
                </f:content>
            </f:DynamicPageHeader>
        </f:header>
        <f:content>
            <smartTable:SmartTable
                id="idInvoiceListSmartTable"
                entitySet="Invoices"
                smartFilterId="idInvoiceListFilterBar"
                useExportToExcel="true"
                useVariantManagement="true"
                useTablePersonalisation="true"
                placeToolbarInTable="true"
                persistencyKey="bstu.hmss.manageinvoices.invoicelisttable"
                initialise="onInitSmartFilterBar"
                header="{i18n>Invoice.TypeNamePlural}"
                showRowCount="true"
                smartVariant="idInvoiceListPageVariant"
                enableAutoBinding="false"
                requestAtLeastFields="ID"
                beforeRebindTable="onBeforeRebindTable">
                <smartTable:customToolbar>
                    <OverflowToolbar
                        id="idSmartTableToolbar"
                        design="Transparent">
                        <ToolbarSpacer id="idSmartTableToolbarSpacer"/>
                        <Button
                            id="idButtonOpenInvoice"
                            text="{i18n>Button.OpenInvoice}"
                            type="Transparent"
                            enabled="{= !!${this>/SelectedInvoiceInvoiceNumber} }"
                            press="onPressOpenInvoice"/>
                        <Button
                            id="idCreateInvoiceButton"
                            text="{i18n>InvoiceList.CreateInvoiceButton}"
                            type="Transparent"
                            press="onCreateInvoicePress"/>
                    </OverflowToolbar>
                </smartTable:customToolbar>
                <table:Table
                    id="idInvoiceListTable"
                    selectionMode="Single"
                    visibleRowCountMode="Auto"
                    enableColumnFreeze="true"
                    rowActionCount="1"
                    rowSelectionChange="onRowSelectionChangeInvoice">
                    <table:columns>
                        <table:Column
                            id="idColumnInvoiceNumber"
                            sortProperty="InvoiceNumber">
                            <Label
                                id="idLabelInvoiceNumber"
                                text="{i18n>Invoice.InvoiceNumber}"/>
                            <table:customData>
                                <core:CustomData key="p13nData"
                                                 value='\{"columnKey": "InvoiceNumber", "columnIndex":"0", "leadingProperty": "InvoiceNumber"}'/>
                            </table:customData>
                            <table:template>
                                <Text
                                    id="idTextInvoice"
                                    text="{InvoiceNumber}"/>
                            </table:template>
                        </table:Column>

                        <table:Column
                            id="idColumnInvoiceFirstName"
                            sortProperty="FirstName">
                            <Label
                                id="idLabelInvoiceFirstName"
                                text="{i18n>Invoice.FirstName}"/>
                            <table:customData>
                                <core:CustomData key="p13nData"
                                                 value='\{"columnKey": "FirstName", "columnIndex":"1", "leadingProperty": "FirstName"}'/>
                            </table:customData>
                            <table:template>
                                <Text
                                    id="idTextInvoice"
                                    text="{FirstName}"/>
                            </table:template>
                        </table:Column>

                        <table:Column
                            id="idColumnInvoiceLastName"
                            sortProperty="LastName">
                            <Label
                                id="idLabelInvoiceLastName"
                                text="{i18n>Invoice.LastName}"/>
                            <table:customData>
                                <core:CustomData key="p13nData"
                                                 value='\{"columnKey": "LastName", "columnIndex":"2", "leadingProperty": "LastName"}'/>
                            </table:customData>
                            <table:template>
                                <Text
                                    id="idTextInvoiceLastName"
                                    text="{LastName}"/>
                            </table:template>
                        </table:Column>

                        <table:Column
                            id="idColumnInvoicePatronymic"
                            sortProperty="Patronymic">
                            <Label
                                id="idLabelInvoicePatronymic"
                                text="{i18n>Invoice.Patronymic}"/>
                            <table:customData>
                                <core:CustomData key="p13nData"
                                                 value='\{"columnKey": "Patronymic", "columnIndex":"3", "leadingProperty": "Patronymic"}'/>
                            </table:customData>
                            <table:template>
                                <Text
                                    id="idTextInvoicePatronymic"
                                    text="{Patronymic}"/>
                            </table:template>
                        </table:Column>

                        <table:Column
                            id="idColumnInvoiceRoomNumber"
                            sortProperty="RoomNumber">
                            <Label
                                id="idLabelInvoiceRoomNumber"
                                text="{i18n>Invoice.RoomNumber}"/>
                            <table:customData>
                                <core:CustomData key="p13nData"
                                                 value='\{"columnKey": "RoomNumber", "columnIndex":"4", "leadingProperty": "RoomNumber"}'/>
                            </table:customData>
                            <table:template>
                                <Text
                                    id="idTextInvoiceRoomNumber"
                                    text="{RoomNumber}"/>
                            </table:template>
                        </table:Column>

                        <table:Column
                            id="idColumnInvoiceDate"
                            sortProperty="InvoiceDate">
                            <Label
                                id="idLabelInvoiceDate"
                                text="{i18n>Invoice.Date}"/>
                            <table:customData>
                                <core:CustomData key="p13nData"
                                                 value='\{"columnKey": "InvoiceDate", "columnIndex":"5", "leadingProperty": "InvoiceDate"}'/>
                            </table:customData>
                            <table:template>
                                <Text
                                    id="idTextInvoiceDate"
                                    text="{InvoiceDate}"/>
                            </table:template>
                        </table:Column>

                        <table:Column
                            id="idColumnInvoiceStatus"
                            sortProperty="Status">
                            <Label
                                id="idLabelInvoiceStatus"
                                text="{i18n>Invoice.Status}"/>
                            <table:customData>
                                <core:CustomData key="p13nData"
                                                 value='\{"columnKey": "Status", "columnIndex":"6", "leadingProperty": "Status"}'/>
                            </table:customData>
                            <table:template>
                                <Text
                                    id="idTextInvoiceStatus"
                                    text="{Status}"/>
                            </table:template>
                        </table:Column>

                        <table:Column
                            id="idColumnTotalSum"
                            sortProperty="TotalSum">
                            <Label
                                id="idLabelInvoiceTotalSum"
                                text="{i18n>Invoice.TotalSum}"/>
                            <table:customData>
                                <core:CustomData key="p13nData"
                                                 value='\{"columnKey": "TotalSum", "columnIndex":"7", "leadingProperty": "TotalSum"}'/>
                            </table:customData>
                            <table:template>
                                <Text
                                    id="idTextInvoiceTotalSum"
                                    text="{TotalSum}"/>
                            </table:template>
                        </table:Column>

                    </table:columns>
                    <table:rowActionTemplate>
                        <table:RowAction id="idRowAction">
                            <table:items>
                                <table:RowActionItem
                                    id="idInvoiceDetailAction"
                                    type="Navigation"
                                    press="onInvoiceDetailPress">
                                </table:RowActionItem>
                            </table:items>
                        </table:RowAction>
                    </table:rowActionTemplate>
                </table:Table>
            </smartTable:SmartTable>
        </f:content>
        <f:footer>
            <OverflowToolbar id="OverflowToolbar">
                <Button
                    id="idMessagePopoverButton"
                    icon="sap-icon://alert"
                    text="{= ${message>/}.length }"
                    type="Emphasized"
                    visible="{= !!${message>/}.length }"
                    press="onMessagesButtonPress"/>
            </OverflowToolbar>
        </f:footer>
    </f:DynamicPage>
</mvc:View>
